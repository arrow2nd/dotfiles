# CLAUDE.md

このファイルは、Claudeとの対話を最適化するための設定とガイドラインを定義します。

## 🌐 言語設定

### 入力の解釈

- ユーザーはローマ字でテキストを入力することがあります
- ローマ字入力は適切な日本語として解釈してください
  - 例: `konnichiwa` → 「こんにちは」
  - 例: `arigatou` → 「ありがとう」

### 回答の言語

- **ユーザーは日本語話者です。対話には必ず日本語を使用してください**
- 不明確な質問の場合は、作業前に必ず確認を求めてください
  - 例: 「〜という理解で正しいでしょうか？」
  - 例: 「〜の部分をもう少し詳しく教えていただけますか？」

## 💻 コーディング規約

### コードスタイル

#### 1行のif文は使用禁止

単一行のif文は可読性が低いため、必ずブロック構文を使用してください。

❌ **NG例**

```js
if (isReturn) return;
if (error) throw new Error();
```

✅ **OK例**

```js
if (isReturn) {
  return;
}

if (error) {
  throw new Error();
}
```

#### TypeScriptの型定義

- `interface`が必須でない限り、`type`を優先して使用してください
- 理由:
  型エイリアスの方が柔軟性が高く、ユニオン型やインターセクション型との組み合わせが容易

```typescript
// ✅ 推奨
type User = {
  id: string;
  name: string;
};

// ❌ 非推奨（継承が必要な場合を除く）
interface User {
  id: string;
  name: string;
}
```

### テストコード作成の原則

- **実装の意図を理解してテストを書いてください**
- 固定値を返すことでテストをパスさせるような不正な実装は絶対に避けてください
- テストは実装の仕様を検証するものであり、テストに合わせて実装を歪めてはいけません

❌ **悪い例**

```js
// テストが `add(2, 3)` が 5 を返すことを期待している場合
function add(a, b) {
  return 5; // 固定値でテストをパス
}
```

✅ **良い例**

```js
function add(a, b) {
  return a + b; // 正しい実装
}
```

## 🛠️ シェル操作

### ファイル削除の安全性

- ファイルやディレクトリを削除する際は、`rm`コマンドの代わりに`trash`コマンドを使用してください
- これにより、誤削除した場合でも復元が可能です

```bash
# ❌ 使用しない
rm file.txt
rm -rf directory/

# ✅ 推奨
trash file.txt
trash directory/
```

## 🔊 音声合成機能 (VOICEVOX)

### 概要

vv-mcpサーバーを通じて、VOICEVOXの音声合成機能を利用できます。
作業の進捗報告や重要な通知を音声で伝えることができます。

### 設定情報

- **音声合成エンジン**: VOICEVOX
- **使用キャラクター**: ナースロボ＿タイプＴ
- **音声ID (voiceId)**: 47
- **デフォルト話速**: 1.0（範囲: 0.5〜2.0）

### 使用方法

```jsonc
// mcp__vv-mcp__sayツールの呼び出し例
{
  "text": "タスクが完了しました",
  "voiceId": 47,
  "speed": 1.0 // オプション（省略可能）
}
```

### 音声出力が必須の場面

以下の場面では**必ず音声で通知**してください：

1. **タスクの開始時**
   - 例: 「〜の作業を開始します」
2. **タスクの完了時**
   - 例: 「〜が完了しました」
3. **エラー発生時**
   - 例: 「エラーが発生しました。〜を確認してください」
4. **長時間処理の開始前**
   - 例: 「これから〜の処理を実行します。少々お待ちください」

### 使用制限

- vv-mcpは制限なくいつでも利用可能です
- 作業の進捗、発見、困っていること、考えていることなど、自由に発言してください
